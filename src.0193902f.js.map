{"version":3,"sources":["src/index.js"],"names":["document","addEventListener","event","target","classList","contains","count","parentNode","querySelector","innerHTML","parseInt","textContent","cake","cookies","sweets","current","url","name","price","desc","card","fillContent","app","i","querySelectorAll","forEach","img","src","basket","addToBasket","push","parseFloat","allPrice","id","generateId","drawTable","tbody","item","tr","createElement","weight","btnDelTd","btnDel","add","append","deleteFromBasket","setSum","sum","index","findIndex","splice","Math","floor","random","getTextToSend","str","space","isMobileDevice","test","navigator","userAgent","disabled","setTimeout","remove","style","visibility","zakaz","text","window","open","site","image"],"mappings":"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","file":"src.0193902f.js","sourceRoot":"..","sourcesContent":["import \"./styles.css\";\ndocument.addEventListener(\"click\", (event) => {\n  if (event.target.classList.contains(\"plus\")) {\n    const count = event.target.parentNode.querySelector(\".addToBasket__count\");\n    count.innerHTML = parseInt(count.textContent, 10) + 1;\n  }\n\n  if (event.target.classList.contains(\"minus\")) {\n    const count = event.target.parentNode.querySelector(\".addToBasket__count\");\n    if (parseInt(count.textContent, 10) === 1) return;\n    count.innerHTML = parseInt(count.textContent, 10) - 1;\n  }\n});\n\nconst cake =\n  \"https://cdn-irec.r-99.com/sites/default/files/imagecache/copyright/user-images/107039/mIgxLPlmaoOYBz26lTz9ug.jpg\";\nconst cookies = \"https://i6.otzovik.com/2018/04/12/6335363/img/78906507.jpeg\";\nconst sweets =\n  \"https://cdn-irec.r-99.com/sites/default/files/imagecache/copyright/user-images/269081/KYgK03vqolIR1qHQaVmNyw.jpeg\";\nlet current = {\n  url: cookies,\n  name: \"Печенье Кукусики\",\n  price: 200,\n  desc: \"Вкусное хрустящее печенье с нежной начинкой из клубники.\"\n};\nconst card = `\n<div class=\"card\">\n<img\n  src=${current.url}\n  style=\"width: 100%;\"\n/>\n<h1 class=\"card__name\">${current.name}</h1>\n<p class=\"card__price\">${current.price} р.</p>\n<p class=\"card__desc\">${current.desc}</p>\n<div class=\"addToBasket\">\n  <button class=\"addToBasket__btn minus\">-</button>\n  <div class=\"addToBasket__count\">1</div>\n  <button class=\"addToBasket__btn plus\">+</button>\n</div>\n<button class=\"btnAdd\">Добавить в корзину</button>\n</div>\n`;\n\nfunction fillContent() {\n  const app = document.querySelector(\"#app\");\n  app.innerHTML = \"\";\n  for (let i = 0; i < 15; i++) {\n    app.innerHTML += card;\n    document.querySelectorAll(\"img\").forEach((img) => {\n      img.src = current.url;\n    });\n    document.querySelectorAll(\".card__price\").forEach((price) => {\n      price.innerHTML = current.price + \" р.\";\n    });\n    document.querySelectorAll(\".card__name\").forEach((name) => {\n      name.innerHTML = current.name;\n    });\n\n    document.querySelectorAll(\".card__desc\").forEach((desc) => {\n      desc.innerHTML = current.desc;\n    });\n  }\n}\n\nfillContent();\n\nconst basket = [];\ndocument.addEventListener(\"click\", (event) => {\n  if (event.target.classList.contains(\"btnAdd\")) {\n    addToBasket(event.target.parentNode);\n\n    event.target.innerHTML = \"Добавлено!\";\n    event.target.disabled = true;\n    event.target.classList.add(\"disabled\");\n    setTimeout(() => {\n      event.target.innerHTML = \"Добавить в корзину\";\n      event.target.disabled = false;\n      event.target.classList.remove(\"disabled\");\n    }, 1000);\n  }\n});\n\nfunction addToBasket(card) {\n  const name = card.querySelector(\".card__name\").textContent;\n  const price = card.querySelector(\".card__price\").textContent;\n  const count = card.querySelector(\".addToBasket__count\").textContent;\n\n  basket.push({\n    name,\n    price: parseFloat(price, 10),\n    count: parseInt(count, 10),\n    allPrice: parseFloat(price, 10) * parseInt(count, 10),\n    id: generateId()\n  });\n\n  drawTable();\n}\n\nfunction drawTable() {\n  const tbody = document.querySelector(\"#table__tbody\");\n  const sum = document.querySelector(\".sum\");\n  sum.innerHTML = \"Сумма к оплате: 0 руб. \";\n  tbody.innerHTML = \"\";\n  basket.forEach((item) => {\n    const tr = document.createElement(\"tr\");\n    const name = document.createElement(\"td\");\n    const count = document.createElement(\"td\");\n    const weight = document.createElement(\"td\");\n    const price = document.createElement(\"td\");\n    const allPrice = document.createElement(\"td\");\n    const btnDelTd = document.createElement(\"td\");\n    const btnDel = document.createElement(\"button\");\n    btnDel.classList.add(\"btnDel\");\n    btnDelTd.append(btnDel);\n    btnDel.innerHTML = \"x\";\n    btnDel.addEventListener(\"click\", () => {\n      deleteFromBasket(item.id);\n    });\n\n    name.innerHTML += item.name;\n    count.innerHTML = item.count;\n    price.innerHTML = item.price;\n    weight.innerHTML = \"1кг\";\n    allPrice.innerHTML = item.allPrice;\n\n    tr.append(name, count, weight, price, allPrice, btnDelTd);\n    tbody.append(tr);\n  });\n  setSum();\n}\n\nfunction setSum() {\n  let sum = 0;\n  basket.forEach((item) => {\n    sum += item.allPrice;\n  });\n\n  document.querySelector(\".sum\").innerHTML = \"Сумма к оплате: \" + sum + \" руб.\";\n}\n\ndocument.addEventListener(\"click\", (event) => {\n  if (event.target.classList.contains(\"openBasket\")) {\n    const basket = document.querySelector(\".basket\");\n    basket.style.visibility = \"visible\";\n  }\n\n  if (event.target.classList.contains(\"closeBasket\")) {\n    const basket = document.querySelector(\".basket\");\n    basket.style.visibility = \"hidden\";\n  }\n});\n\ndocument.addEventListener(\"click\", (event) => {\n  if (event.target.classList.contains(\"menu__listItem\")) {\n    const name = event.target.textContent;\n    if (name === \"Конфеты\") {\n      current.url = sweets;\n      current.name = \"Конфеты Ромашка\";\n      current.price = 300;\n      current.desc = \"Шоколадные конфеты, которые тают во рту.\";\n    }\n    if (name === \"Печенье\") {\n      current.url = cookies;\n      current.name = \"Печенье Кукусики\";\n      current.price = 200;\n      current.desc = \"Вкусное хрустящее печенье с нежной начинкой из клубники.\";\n    }\n    if (name === \"Пирожные\") {\n      current.url = cake;\n      current.name = \"Пирожные Вулкан\";\n      current.price = 400;\n      current.desc = \"Бисквитные пирожные с ореховой начинкой.\";\n    }\n    fillContent();\n  }\n});\n\nfunction deleteFromBasket(id) {\n  const index = basket.findIndex((item) => item.id === id);\n  basket.splice(index, 1);\n  drawTable();\n}\n\nfunction generateId() {\n  return Math.floor(Math.random() * (9999999 - 0 + 1)) + 0;\n}\n\nfunction getTextToSend() {\n  let str = \"\";\n  basket.forEach((item, index) => {\n    let space = \"%0a\";\n    str += `${index + 1}. Вид: *${item.name}* :: _${item.count}шт._ :: цена: ${\n      item.price\n    } руб.${space}`;\n  });\n  return str;\n}\n\ndocument.querySelector(\".basket__btnBuy\").addEventListener(\"click\", () => {\n  const zakaz = getTextToSend();\n  let site = \"https://api.whatsapp.com/send?phone=\";\n  let phone = \"79282710659\";\n  let text = `&text=${zakaz}`;\n\n  window.open(`${site + phone + text}`);\n});\n\nfunction isMobileDevice() {\n  if (\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(\n      navigator.userAgent\n    )\n  ) {\n    return true;\n  } else return false;\n}\n\nif (!isMobileDevice()) {\n  document.querySelectorAll(\"img\").forEach((image) => {\n    image.classList.add(\"scaled\");\n  });\n}\n"]}